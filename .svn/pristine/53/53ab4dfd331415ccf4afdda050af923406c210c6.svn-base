System.register(["cc"], function (_export, _context) {
  "use strict";

  var _cclegacy, __checkObsolete__, __checkObsoleteInNamespace__, _decorator, Component, AudioSource, _dec, _class, _crd, ccclass, property, AudioPlayer;

  return {
    setters: [function (_cc) {
      _cclegacy = _cc.cclegacy;
      __checkObsolete__ = _cc.__checkObsolete__;
      __checkObsoleteInNamespace__ = _cc.__checkObsoleteInNamespace__;
      _decorator = _cc._decorator;
      Component = _cc.Component;
      AudioSource = _cc.AudioSource;
    }],
    execute: function () {
      _crd = true;

      _cclegacy._RF.push({}, "b0ea8ulumpAtqEQSAwVIfVg", "AudioPlayer", undefined);

      __checkObsolete__(['_decorator', 'Component', 'Node', 'AudioSource']);

      ({
        ccclass,
        property
      } = _decorator);

      _export("AudioPlayer", AudioPlayer = (_dec = ccclass('AudioPlayer'), _dec(_class = class AudioPlayer extends Component {
        constructor() {
          super(...arguments);
          this._audioPlayers = void 0;
          this._audioIdx = void 0;
          this._audioLastIdx = void 0;
          this._isMute = void 0;
        }

        start() {
          this._audioPlayers = [];
          this._audioIdx = 0;
          this._audioLastIdx = -1;
          var audio = this.node.getChildByName("AudioSource1").getComponent(AudioSource);

          this._audioPlayers.push(audio);

          audio = this.node.getChildByName("AudioSource2").getComponent(AudioSource);

          this._audioPlayers.push(audio);

          audio = this.node.getChildByName("AudioSource3").getComponent(AudioSource);

          this._audioPlayers.push(audio); // this._audioPlayer = this.getComponent(engine.AudioSource);

        }

        onUpdate(dt) {}

        play(audioName, stopLast) {
          if (stopLast === void 0) {
            stopLast = true;
          }

          if (stopLast) {
            if (this._audioLastIdx >= 0) {
              this._audioPlayers[this._audioLastIdx].stop();

              this._audioPlayers[this._audioLastIdx].clip = null;
            }
          }

          this._audioIdx = this._audioLastIdx + 1;
          this._audioLastIdx = this._audioIdx;

          if (this._audioIdx >= 3) {
            this._audioIdx = 0;
            this._audioLastIdx = 0;
          }

          var self = this;
          var url = "Resources/Sound/" + audioName + ".mp3";
          var audioClip = engine.loader.getAsset(url);
          var player = this._audioPlayers[this._audioIdx];

          if (audioClip) {
            player.clip = audioClip;
            player.play();
          } else {
            var loadTask = engine.loader.load(url);
            loadTask.promise.then(function (audio) {
              player.clip = audio;
              player.play();
            }).catch(function (error) {
              console.error(error);
            });
          }
        }

        setMute(isMute) {
          this._isMute = isMute;

          for (var i = 0; i < this._audioPlayers.length; i++) {
            this._audioPlayers[i].mute = isMute;
          }
        }

        onDestroy() {}

      }) || _class));

      _cclegacy._RF.pop();

      _crd = false;
    }
  };
});
//# sourceMappingURL=44c449c97f5af6adda1c47eee0f0de591b08777e.js.map