System.register("chunks:///_virtual/AudioPlayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,o,a,s,e,u;return{setters:[function(i){t=i.inheritsLoose},function(i){o=i.cclegacy,a=i._decorator,s=i.AudioSource,e=i.resources,u=i.Component}],execute:function(){var d;o._RF.push({},"b0ea8ulumpAtqEQSAwVIfVg","AudioPlayer",void 0);var n=a.ccclass;a.property,i("AudioPlayer",n("AudioPlayer")(d=function(i){function o(){for(var t,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(t=i.call.apply(i,[this].concat(a))||this)._audioPlayers=void 0,t._audioIdx=void 0,t._audioLastIdx=void 0,t._bgmPlayer=void 0,t._isMute=void 0,t}t(o,i);var a=o.prototype;return a.start=function(){this._audioPlayers=[],this._audioIdx=0,this._audioLastIdx=-1;var i=this.node.getChildByName("Sound1").getComponent(s);this._audioPlayers.push(i),i=this.node.getChildByName("Sound2").getComponent(s),this._audioPlayers.push(i),i=this.node.getChildByName("Sound3").getComponent(s),this._audioPlayers.push(i),this._bgmPlayer=this.node.getChildByName("BGM").getComponent(s)},a.onUpdate=function(i){},a.play=function(i,t){void 0===t&&(t=!0),t&&this._audioLastIdx>=0&&(this._audioPlayers[this._audioLastIdx].stop(),this._audioPlayers[this._audioLastIdx].clip=null),this._audioIdx=this._audioLastIdx+1,this._audioLastIdx=this._audioIdx,this._audioIdx>=3&&(this._audioIdx=0,this._audioLastIdx=0);var o=this._audioPlayers[this._audioIdx],a="audio/"+i;this.playByUrl(a,o)},a.playBGM=function(i){var t="audio/bgm/"+i;this.playByUrl(t,this._bgmPlayer)},a.stopBGM=function(){this._bgmPlayer.stop(),this._bgmPlayer.clip=null},a.playByUrl=function(i,t){if(!t){var o=this._audioLastIdx>=0?this._audioLastIdx:0;t=this._audioPlayers[o]}var a=e.get(i);a?(t.clip=a,t.play()):e.load(i,(function(i,o){t.clip=o,t.play()}))},a.setMute=function(i){this._isMute=i;for(var t=0;t<this._audioPlayers.length;t++)this._audioPlayers[t].volume=i?0:1;this._bgmPlayer.volume=i?0:1},a.onPause=function(){this._bgmPlayer.pause()},a.onResume=function(){this._bgmPlayer.play()},a.onDestroy=function(){},o}(u))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/BaseController.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"46036IGO5dHooIhQjieCcGm","BaseController",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/BaseView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./EventEnum.ts"],(function(t){var n,e,i,o,a,r,s;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,o=t.Button,a=t.Component},function(t){r=t.EventManager},function(t){s=t.EventEnum}],execute:function(){var c;e._RF.push({},"16409XXoOFIRpLEVNYL+xsp","BaseView",void 0);var u=i.ccclass;i.property,t("BaseView",u("BaseView")(c=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this)._gameType=void 0,n}n(e,t);var i=e.prototype;return i.start=function(){this.initUI()},i.initUI=function(){var t=this,n=this.node.getChildByName("btnExit");n&&n.on(o.EventType.CLICK,(function(){t.exit()}))},i.exit=function(){this.node.active=!1,r.dispatch(s.OnGameExit,this._gameType)},e}(a))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/EventEnum.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"de7ab2nvCdCOo5hQQ7bd4hU","EventEnum",void 0);e("EventEnum",function(e){return e[e.OnGameStart=1]="OnGameStart",e[e.OnGameExit=2]="OnGameExit",e[e.OnGameGridTouchEnd=3]="OnGameGridTouchEnd",e[e.OnGameGridReqNextPreview=4]="OnGameGridReqNextPreview",e[e.OnUserInfoUpdate=5]="OnUserInfoUpdate",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t;return{setters:[function(e){n=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"f71fbEVJ8ZPWLql8qocTil7","EventManager",void 0),e("EventManager",function(){function e(){}return e.addListener=function(e,n,t){e&&(null==this.events[e]&&(this.events[e]=[]),this.isExist(e,n,t)||this.events[e].push({listener:n,listenerObj:t}))},e.removeListener=function(e,n,t){if(e){var r=this.events[e];if(null!=r){for(var i=0,s=r.length;i<s;i++)if(r[i].listener==n&&r[i].listenerObj==t){r.splice(i,1);break}0==r.length&&(this.events[e]=null,delete this.events[e])}}},e.isExist=function(e,t,r){var i=!1,s=this.events[e];if(null!=s)for(var l,a=n(s);!(l=a()).done;){var o=l.value;if(o.listener==t&&o.listenerObj==r){i=!0;break}}return i},e.dispatch=function(e){if(e){var n=this.events[e];if(null!=n){for(var t,r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];for(var l=n.length-1;l>=0;l--)null!=(t=n[l])&&t.hasOwnProperty("listener")&&t.listener.apply(t.listenerObj,i)}}},e.clear=function(){this.events={}},e}()).events={},t._RF.pop()}}}));

System.register("chunks:///_virtual/GameGridController.ts",["cc","./GameType.ts","./EventEnum.ts","./EventManager.ts","./GameGridStartView.ts"],(function(t){var e,i,a,n,r,o,s;return{setters:[function(t){e=t.cclegacy,i=t.resources,a=t.utils},function(t){n=t.GameType},function(t){r=t.EventEnum},function(t){o=t.EventManager},function(t){s=t.GameGridStartView}],execute:function(){e._RF.push({},"59f13/t6UNLnJ1PSQSruRSx","GameGridController",void 0);t("default",function(){function t(){this._gameGridNode=void 0,this._gameStartView=void 0,this.init()}var e=t.prototype;return e.init=function(){o.addListener(r.OnGameStart,this.onGameStart,this)},e.onGameStart=function(t){if(t==n.Grid){var e="prefab/GameGridMapItem";if(i.get(e))this.start();else{var a=this;i.load(e,(function(){a.start()}))}}},e.start=function(){this._gameGridNode?this._gameStartView.OnGameStart():(this._gameGridNode=a.find("Canvas/Main/Game/GameGrid"),this._gameStartView=this._gameGridNode.getComponent(s)),this._gameGridNode.active=!0;var t="prefab/ScoreAddItem";i.get(t)||i.load(t,(function(){var e=i.get(t);console.log("ScoreAddItem load complete",e)}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/GameGridStartView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./EventEnum.ts","./TweenManager.ts","./Mgr.ts","./GameType.ts","./WXSDK.ts"],(function(t){var e,i,s,o,n,r,a,h,c,d,_,v,l,u,m,f,p,g;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){s=t.cclegacy,o=t._decorator,n=t.Label,r=t.Button,a=t.math,h=t.resources,c=t.instantiate,d=t.Node,_=t.NodeEventType,v=t.Component},function(t){l=t.EventManager},function(t){u=t.EventEnum},function(t){m=t.default},function(t){f=t.default},function(t){p=t.GameType},function(t){g=t.default}],execute:function(){var w;s._RF.push({},"69e67CI+7tHQbqXh4SVvSKk","GameGridStartView",void 0);var y=o.ccclass,C=(o.property,t("GameGridStartView",y("GameGridStartView")(w=function(t){function i(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))||this)._btns=void 0,e._txtScore=void 0,e._btnSave=void 0,e._mapItemList=void 0,e._mapContainer=void 0,e._effectContainer=void 0,e._rightCount=0,e._score=0,e._removeCount=0,e._userdata=void 0,e._scoreAddItemList=[],e.ScoreItemPool=[],e._endCheckLocalPos=void 0,e}e(i,t);var s=i.prototype;return s.update=function(t){},s.start=function(){this._mapContainer=this.node.getChildByPath("gridMap/items"),this._effectContainer=this.node.getChildByPath("gridMap/effect"),this._btns=[];for(var t=0;t<3;t++){var e=t+1,i=new S(this.node.getChildByName("BtnPreviewGrid"+e));i.gridIndex=t,this._btns.push(i)}this._txtScore=this.node.getChildByName("txtScore").getComponent(n),this._txtScore.string="得分：0";var s=this;this.node.getChildByName("btnExit").on(r.EventType.CLICK,(function(){s.hide()})),this.node.getChildByName("btnRestart").on(r.EventType.CLICK,(function(){s.OnGameRestart(),s._btnSave.active=!0})),this._btnSave=this.node.getChildByName("btnSave"),this._btnSave.on(r.EventType.CLICK,(function(){s._btnSave.active=!1,s.saveCurData()})),this.initMapGrid(),l.addListener(u.OnGameGridTouchEnd,this.OnTouchEndCheck,this)},s.onDisable=function(){f.soundMgr.stopBGM()},s.saveCurData=function(){for(var t=this._score,e=[],i=0;i<10;i++)for(var s=0;s<10;s++)e[i]||(e[i]=[]),e[i][s]=this._mapItemList[i][s].isEmpty;for(var o=[],n=0;n<this._btns.length;n++){var r=this._btns[n].getCurGridInfo();o.push(r)}var a={time:String(+new Date/1e3),score:t,game_data:e,gridInfos:o,is_valid:!0};g.DB.collection("gamegrid_userdata").doc("game_cur_data").set({data:a,success:function(t){console.log("doc set success",t,t.data),g.showToast("保存成功")},fail:function(t){console.log("doc set fail",t,t.data),g.showToast("保存失败")}})},s.uploadScore=function(){var t=String(+new Date/1e3),e=this._score,i={wxgame:{score:e,update_time:t},unitStr:"分",order:2},s={key:"rank_"+p.Grid,value:i};g.postMessage({type:"UploadScore",KVData:s}),g.UploadUserGameData({game_type:p.Grid,score:e,time:t})},s.initMapGrid=function(){this._mapItemList=[];for(var t=0;t<10;t++)for(var e=0;e<10;e++){this._mapItemList[t]||(this._mapItemList[t]=[]);var i=new C;this._mapItemList[t][e]=i,i.init(e,t,this._mapContainer)}this.OnGameStart()},s.OnReqNextPreview=function(){for(var t=0;t<this._btns.length;t++)this._btns[t].updatePreviewGrid()},s.OnTouchEndCheck=function(t,e){this._endCheckLocalPos||(this._endCheckLocalPos=new a.Vec3);for(var i=e.length,s=0,o=[],n=0;n<i;n++){var r=e[n];if(this._mapContainer.inverseTransformPoint(this._endCheckLocalPos,r.worldPosition),!(this._endCheckLocalPos.x>=-500&&this._endCheckLocalPos.x<=500&&this._endCheckLocalPos.y>=-500&&this._endCheckLocalPos.y<=500))break;var h=this.ConvertXYToIndex(this._endCheckLocalPos.x,this._endCheckLocalPos.y),c=this._mapItemList[h[1]][h[0]];if(!c.isEmpty)break;s++,o.push(c)}var d=[],_=[];if(s==i){for(var v=0;v<o.length;v++){o[v].setEmpty(!1);var l=o[v].col,u=o[v].row;-1==d.indexOf(l)&&d.push(l),-1==_.indexOf(u)&&_.push(u)}this._rightCount++,this._btns[t].ShowRight(o)}else this._btns[t].ShowError();this._rightCount>=3&&(this._rightCount=0,this.OnReqNextPreview());for(var m=d.length-1;m>=0;m--)for(var p=d[m],g=0;g<10;g++)if(this._mapItemList[g][p].isEmpty){d.splice(m,1);break}for(var w=_.length-1;w>=0;w--)for(var y=_[w],C=0;C<10;C++)if(this._mapItemList[y][C].isEmpty){_.splice(w,1);break}for(var S=!1,I=d.length,G=_.length,E=0;E<I;E++)for(var L=d[E],b=0;b<10;b++)this._mapItemList[b][L].setEmpty(!0,!0,1),S=!0;for(var P=0;P<G;P++)for(var x=_[P],M=0;M<10;M++)this._mapItemList[x][M].setEmpty(!0,!0,2),S=!0;if(S){this._removeCount++;var T=I+G,k=0;1==T||2==T?k=T:3==T?k=T+1:T>3&&(k=2*T),this._removeCount>1&&(k+=this._removeCount*T),this._score+=k,this._txtScore.string="得分："+this._score,f.soundMgr.play("crrect_answer3"),this.showScoreAddEffect(k)}else this._removeCount=0},s.showScoreAddEffect=function(t){var e=this,i=this.ScoreItemPool.pop();if(!i){var s=h.get("prefab/ScoreAddItem");if(!s)return void console.log("scoreitem has been loading");i=c(s)}this._scoreAddItemList.push(i),this._effectContainer.addChild(i),i.getChildByName("txtScoreAdd").getComponent(n).string="+"+t,i.active=!0,i.setScale(.1,.1),i.setPosition(this._endCheckLocalPos.x,this._endCheckLocalPos.y),m.addTween(i).to({scaleX:3,scaleY:3},100).to({scaleX:1,scaleY:1},100).wait(400).to({scaleX:.1,scaleY:.1},100).call((function(){i.active=!1;var t=e._scoreAddItemList.indexOf(i);e._scoreAddItemList.splice(t,1),e.ScoreItemPool.push(i)}))},s.ConvertXYToIndex=function(t,e){return[Math.round((t+450)/100),Math.round(Math.abs(e-450)/100)]},s.OnGameStart=function(){var t=this;this._btnSave.active=!1,g.DB.collection("gamegrid_userdata").doc("game_cur_data").get({success:function(e){console.log("get success",e),e.data.is_valid?(t._userdata=e.data,t.OnResume(e.data)):t.OnStart()},fail:function(e){console.log("get fail",e),t.OnStart()}})},s.OnStart=function(){this._score=0,this._txtScore.string="得分：0",this._btnSave.active=!0,this.OnReqNextPreview()},s.OnResume=function(t){this._score=t.score,this._txtScore.string="得分："+this._score;for(var e=0;e<this._mapItemList.length;e++)for(var i=0;i<this._mapItemList[e].length;i++)this._mapItemList[e][i].setEmpty(t.game_data[e][i]);if(this._rightCount=0,t.gridInfos)for(var s=0;s<this._btns.length;s++)this._btns[s].updatePreviewGrid(t.gridInfos[s]),t.gridInfos[s].enable||this._rightCount++;else this.OnReqNextPreview()},s.OnGameRestart=function(){this.exitClear(!0),this.OnStart()},s.exitClear=function(t){void 0===t&&(t=!1),this._userdata&&(g.DB.collection("gamegrid_userdata").doc("game_cur_data").set({data:{is_valid:!1},success:function(t){console.log("doc set success",t,t.data)},fail:console.error}),this._userdata=null),this._rightCount=0,this._txtScore.string="得分：0",this._score=0;for(var e=0;e<this._mapItemList.length;e++)for(var i=0;i<this._mapItemList[e].length;i++)this._mapItemList[e][i].setEmpty(!0,t);for(var s=0;s<this._scoreAddItemList.length;s++){var o=this._scoreAddItemList[s];m.removeTweens(o),o.active=!1,this.ScoreItemPool.push(o)}this._scoreAddItemList=[]},s.hide=function(){this.uploadScore(),this.exitClear(),this.node.active=!1,l.dispatch(u.OnGameExit,p.Grid)},i}(v))||w),t("MapGridItem",function(){function t(){this._col=void 0,this._row=void 0,this._posX=void 0,this._posY=void 0,this._itemEntity=void 0,this._container=void 0,this._posArr=void 0,this._isEmpty=!0,this._playTween=void 0}var e=t.prototype;return e.consturctor=function(){},e.init=function(t,e,i){this._col=t,this._row=e,this._posX=100*t-450,this._posY=450-100*e,this._posArr=[this._posX,this._posY],this._container=i},e.initUI=function(){var t=h.get("prefab/GameGridMapItem");t&&(this._itemEntity=c(t),this._container.addChild(this._itemEntity),this._itemEntity.setPosition(this._posX,this._posY))},e.setEmpty=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=-1),this._isEmpty=t,t){if(this._itemEntity)if(e){if(!this._playTween){this._playTween=!0;var s=0;i>0&&(s=1==i?this._row:this._col),m.addTween(this._itemEntity).wait(50*s).to({scaleX:2,scaleY:2},50).to({scaleX:0,scaleY:0},100)}}else this.clearTween(),this._itemEntity.active=!1}else this._itemEntity?(this.clearTween(),this._itemEntity.active=!0):this.initUI()},e.clearTween=function(){this._playTween&&(m.removeTweens(this._itemEntity),this._itemEntity.setScale(1,1),this._playTween=!1)},e.getItemWorldPos=function(){return this._itemEntity?this._itemEntity.getWorldPosition():null},i(t,[{key:"isEmpty",get:function(){return this._isEmpty}},{key:"position",get:function(){return this._posArr}},{key:"col",get:function(){return this._col}},{key:"row",get:function(){return this._row}}]),t}())),S=function(){function t(t){this._touchMask=void 0,this._preview=void 0,this._previewPos=void 0,this._previewScale=void 0,this._previewX=void 0,this._previewY=void 0,this._moveStartX=void 0,this._moveStartY=void 0,this._canMove=void 0,this._gridIndex=void 0,this._randomGrid=void 0,this._lastRandomGrid=void 0,this._gridList=void 0,this._btnGrid=void 0,this._node=void 0,this._prefabUrl=void 0,this._node=t,this.initUI()}var e=t.prototype;return e.initUI=function(){this._preview=this._node.getChildByName("preview"),this._previewPos=this._preview.getPosition(),this._previewScale=this._preview.getScale(),this._previewX=this._previewPos.x,this._previewY=this._previewPos.y,this._btnGrid=this._node.getChildByName("btnGrid"),this._btnGrid.on(d.EventType.TOUCH_CANCEL,(function(){t.touchEnd()})),this._btnGrid.on(_.TOUCH_END,(function(){t.touchEnd()}));var t=this,e=new a.Vec3,i=new a.Vec3;this._btnGrid.on(_.TOUCH_START,(function(s){var o=s.getUIStartLocation();i.x=o.x,i.y=o.y,t._node.inverseTransformPoint(e,i),t.touchStart(e.x,e.y)})),this._btnGrid.on(_.TOUCH_MOVE,(function(e){var i=e.getUIDelta();t.touchMove(i.x,i.y)})),this._touchMask=this._node.getChildByName("touchMask"),this._touchMask.active=!1},e.touchStart=function(t,e){if(!this._canMove){this._moveStartX=t,this._moveStartY=e+250;this._canMove=!0,m.removeTweens(this._preview),m.addTween(this._preview).to({scaleX:2,scaleY:2,x:this._moveStartX,y:this._moveStartY},100),f.soundMgr.play("crrect_answer1",!1)}},e.touchMove=function(t,e){if(this._canMove){var i=this._moveStartX+t,s=this._moveStartY+e;this._moveStartX=i,this._moveStartY=s,this._preview.setPosition(i,s)}},e.touchEnd=function(){this._canMove&&(this._canMove=!1,l.dispatch(u.OnGameGridTouchEnd,this._gridIndex,this._gridList))},e.ShowRight=function(t){var e=this;this._touchMask.active=!0,f.soundMgr.play("crrect_answer2",!1);for(var i=function(){var i=t[s],o=new a.Vec3;e._randomGrid.inverseTransformPoint(o,i.getItemWorldPos());var n=e._gridList[s];m.addTween(n).to({x:o.x,y:o.y},100).call((function(){n.active=!1}))},s=0;s<t.length;s++)i()},e.ShowError=function(){f.soundMgr.play("mobile_phone_O",!1),m.removeTweens(this._preview),m.addTween(this._preview).to({x:this._previewX,y:this._previewY,scaleX:1,scaleY:1},100)},e.getCurGridInfo=function(){var t=this._randomGrid.getScale(),e=this._randomGrid.angle;return{enable:!this._touchMask.active,url:this._prefabUrl,scaleX:t.x,scaleY:t.y,angle:e}},e.updatePreviewGrid=function(t){if(void 0===t&&(t=null),!t||t.enable){var e;if(this._touchMask.active=!1,this._preview.setPosition(this._previewX,this._previewY),this._preview.setScale(1,1),t)e=t.url;else{var i=1+Math.round(9*Math.random());e="prefab/PreviewGrid"+i}if(this._prefabUrl=e,h.get(e))this.updatePreview(e,t);else{var s=this;h.load(e,(function(){s.updatePreview(e,t)}))}}else if(this._touchMask.active=!0,this._gridList)for(var o=0;o<this._gridList.length;o++)this._gridList[o].active=!1},e.updatePreview=function(t,e){void 0===e&&(e=null);var i,s=h.get(t);if(s){this._lastRandomGrid&&(this._lastRandomGrid.destroy(),this._lastRandomGrid=null),this._randomGrid&&(this._lastRandomGrid=this._randomGrid,this._randomGrid.active=!1),i=c(s),this._preview.addChild(i),this._randomGrid=i;var o=i.children.length;this._gridList=[];for(var n=1;n<=o;n++){var r=i.getChildByName("grid"+n);this._gridList.push(r)}if(e)i.angle=e.angle,i.setScale(e.scaleX,e.scaleY);else{Math.random()>.5&&(i.angle=90);var a=Math.random()>.5?-1:1,d=Math.random()>.5?-1:1;i.setScale(a,d)}}else console.log("找不到资源")},i(t,[{key:"gridIndex",get:function(){return this._gridIndex},set:function(t){this._gridIndex=t}}]),t}();s._RF.pop()}}}));

System.register("chunks:///_virtual/GameNumberController.ts",["cc","./GameType.ts","./EventEnum.ts","./EventManager.ts"],(function(t){var e,n,a,i,r;return{setters:[function(t){e=t.cclegacy,n=t.utils},function(t){a=t.GameType},function(t){i=t.EventEnum},function(t){r=t.EventManager}],execute:function(){e._RF.push({},"5696biQ7pVBKJK/anZ4afL5","GameNumberController",void 0);t("default",function(){function t(){this._gameNumber=void 0,this.init()}var e=t.prototype;return e.init=function(){r.addListener(i.OnGameStart,this.onGameStart,this)},e.onGameStart=function(t){t==a.Nullify&&(this._gameNumber||(this._gameNumber=n.find("Canvas/Main/Game/GameNumber")),this._gameNumber.active=!0)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/GameNumberItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,r,i,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.Label,i=t.NodeEventType,u=t.Component}],execute:function(){var a;n._RF.push({},"9c69b1Fk5FKK6l2Jt1ag9CY","GameNumberItem",void 0);var c=o.ccclass;o.property,t("GameNumberItem",c("GameNumberItem")(a=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this)._txtNumber=void 0,e}e(n,t);var o=n.prototype;return o.start=function(){this.initUI()},o.update=function(t){},o.initUI=function(){var t=this,e=this.node.getPosition();this._txtNumber=this.node.getChildByName("txtNum").getComponent(r),this.node.on(i.TOUCH_MOVE,(function(n){var o=n.getUIDelta(),r=e.x+o.x,i=e.y+o.y;e.x=r,e.y=i,t.node.setPosition(r,i)}))},n}(u))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameNumberStartView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts","./GameType.ts"],(function(t){var e,i,r,n,a;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,r=t._decorator},function(t){n=t.BaseView},function(t){a=t.GameType}],execute:function(){var o;i._RF.push({},"935fdpnHy9CO56OGAlbKVIf","GameNumberStartView",void 0);var s=r.ccclass;r.property,t("GameNumberStartView",s("GameNumberStartView")(o=function(t){function i(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this)._time=0,e}e(i,t);var r=i.prototype;return r.start=function(){this._gameType=a.Nullify,t.prototype.start.call(this)},r.update=function(t){this._time+=t,this._time>=.5&&(this._time=0,this.exit())},r.initUI=function(){t.prototype.initUI.call(this)},i}(n))||o);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameShulteBeginView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameShulteStartView.ts","./EventManager.ts","./EventEnum.ts","./GameType.ts","./ShulteGridItem.ts"],(function(t){var e,i,n,o,s,h,r,a,d,c,u,_,l,m;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,o=t.Button,s=t.resources,h=t.UITransform,r=t.instantiate,a=t.Component,d=t.Label},function(t){c=t.GameShulteStartView},function(t){u=t.EventManager},function(t){_=t.EventEnum},function(t){l=t.GameType},function(t){m=t.ShulteGridItem}],execute:function(){var p,g;i._RF.push({},"c39d5TdjhVK8aXLBveloeCk","GameShulteBeginView",void 0);var v=n.ccclass,S=(n.property,t("GameShulteBeginView",v("GameShulteBeginView")(((g=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this)._itemContainer=void 0,e._beginNode=void 0,e._gameStartNode=void 0,e._gameStart=void 0,e._curTypeIdx=-1,e._num=void 0,e._btns=[],e._items=[],e._typeList=[3,4,5,6,7,8],e._isStart=!1,e}e(i,t);var n=i.prototype;return n.update=function(t){},n.start=function(){var t=this;this._gameStart=this.getComponent(c);var e=this;this._gameStartNode=this.node.getChildByName("gameStart"),this._gameStartNode.active=!1,this._beginNode=this.node.getChildByName("begin"),this._beginNode.active=!0,this._itemContainer=this._beginNode.getChildByPath("group/gridGroup");for(var i=function(i){var n=t._typeList[i],s=new S,h=t._beginNode.getChildByPath("ToggleGroup/btn"+(i+1));s.init(h,n,i),h.on(o.EventType.CLICK,(function(){e.setIndex(i)})),t._btns.push(s)},n=0;n<this._typeList.length;n++)i(n);this._beginNode.getChildByPath("group/btnStart").on(o.EventType.CLICK,(function(){e.OnStartClick()})),this._beginNode.getChildByName("btnExit").on(o.EventType.CLICK,(function(){e.setIndex(0),e.node.active=!1,u.dispatch(_.OnGameExit,l.Shulte)})),this.setIndex(0)},n.OnStartClick=function(){this._isStart||(this._gameStartNode.active=!0,this._beginNode.active=!1,this._gameStart.startGame(this._typeList[this._curTypeIdx]),this._isStart=!0)},n.gameExit=function(){this._isStart=!1},n.setIndex=function(t){if(this._curTypeIdx!=t){this._curTypeIdx>=0&&(this.clearShowGrid(),this._btns[this._curTypeIdx].setSelected(!1)),this._curTypeIdx=t,this._btns[t].setSelected(!0);var e=this._typeList[t];this._num=e*e;var i="prefab/ShulteGridItemShow";if(s.get(i))this.updateShowGrid();else{var n=this;s.load(i,(function(t,e){console.log("#######加载成功"),n.updateShowGrid()}))}}},n.updateShowGrid=function(){for(var t=this._typeList[this._curTypeIdx],e=this._itemContainer.getComponent(h).contentSize.width,i=Math.floor(e/t),n=0;n<this._num;n++)if(this.canShowGrid(n)){var o=this.getShowItemGrid(),s=o.getComponent(h);s.width=i,s.height=i,this._itemContainer.addChild(o),o.active=!0;var r=n%t*i,a=Math.floor(n/t)*-i;o.setPosition(r,a),o.getComponent(m).setIndex(n),this._items.push(o)}},n.getShowItemGrid=function(){var t=i.ITEM_POOL.pop();if(!t){var e=s.get("prefab/ShulteGridItemShow");e?t=r(e):console.log("找不到资源")}return t},n.clearShowGrid=function(){for(var t=0;t<this._items.length;t++){var e=this._items[t];e.active=!1,i.ITEM_POOL.push(e)}this._items=[]},n.canShowGrid=function(t){var e=this._typeList[this._curTypeIdx];return 3==e?4!=t:4==e?5!=t&&6!=t&&9!=t&&10!=t:5==e?(t<6||t>8)&&(t<11||t>13)&&(t<16||t>18):6==e?14!=t&&15!=t&&20!=t&&21!=t:7==e?(t<16||t>18)&&(t<23||t>25)&&(t<30||t>32):(t<18||t>21)&&(t<26||t>29)&&(t<34||t>37)&&(t<42||t>45)},i}(a)).ITEM_POOL=new Array,p=g))||p),function(){function t(){this._isSelected=void 0,this._index=void 0,this._type=void 0,this._itemNode=void 0,this._normalNode=void 0,this._selectedNode=void 0}var e=t.prototype;return e.consturctor=function(){},e.init=function(t,e,i){this._itemNode=t,this._type=e,this._index=i,this.initUI()},e.initUI=function(){this._normalNode=this._itemNode.getChildByName("normal"),this._selectedNode=this._itemNode.getChildByName("selected"),this._itemNode.getChildByName("txtType").getComponent(d).string=this._type+"X"+this._type},e.setSelected=function(t){this._isSelected!=t&&(this._normalNode.active=!t,this._selectedNode.active=t,this._isSelected=t)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/GameShulteController.ts",["cc","./GameType.ts","./EventEnum.ts","./EventManager.ts"],(function(t){var e,n,a,i,u;return{setters:[function(t){e=t.cclegacy,n=t.utils},function(t){a=t.GameType},function(t){i=t.EventEnum},function(t){u=t.EventManager}],execute:function(){e._RF.push({},"daa42tKp1BHCoqIkL8HDt2r","GameShulteController",void 0);t("default",function(){function t(){this._gameShulte=void 0,this.init()}var e=t.prototype;return e.init=function(){u.addListener(i.OnGameStart,this.onGameStart,this)},e.onGameStart=function(t){t==a.Shulte&&(this._gameShulte||(this._gameShulte=n.find("Canvas/Main/Game/GameShulte")),this._gameShulte.active=!0)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/GameShulteStartView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameShulteBeginView.ts","./Mgr.ts","./ShulteGridItem.ts","./GameType.ts","./WXSDK.ts"],(function(t){var e,i,s,o,n,a,r,h,d,_,m,l,u,g,c,v;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,s=t._decorator,o=t.UITransform,n=t.Label,a=t.Animation,r=t.Toggle,h=t.Button,d=t.resources,_=t.instantiate,m=t.Component},function(t){l=t.GameShulteBeginView},function(t){u=t.default},function(t){g=t.ShulteGridItem},function(t){c=t.GameType},function(t){v=t.default}],execute:function(){var p,f;i._RF.push({},"2b0c1wHzw5NY4T6FeB5wXbq","GameShulteStartView",void 0);var C=s.ccclass;s.property,t("GameShulteStartView",C("GameShulteStartView")(((f=function(t){function i(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))||this)._beginNode=void 0,e._gameStartNode=void 0,e._gameContainer=void 0,e._gameContainerSize=void 0,e._itemNodes=[],e._beginView=void 0,e._resultNode=void 0,e._txtTime=void 0,e._txtResultTime=void 0,e._errorAnim=void 0,e._rightAnim=void 0,e._toggle=void 0,e._indexList=[],e._curType=void 0,e._num=void 0,e._time=0,e._deltaTime=0,e._isOver=!0,e._curClickIdx=0,e._clickRight=void 0,e}e(i,t);var s=i.prototype;return s.start=function(){this._beginView=this.getComponent(l),this._beginNode=this.node.getChildByName("begin"),this._gameStartNode=this.node.getChildByName("gameStart"),this._gameContainer=this._gameStartNode.getChildByPath("group/gridGroup"),this._gameContainerSize=this._gameContainer.getComponent(o).contentSize,this._resultNode=this._gameStartNode.getChildByName("result"),this._txtTime=this._gameStartNode.getChildByName("txtTime").getComponent(n),this._txtResultTime=this._resultNode.getChildByName("txtResultTime").getComponent(n),this._errorAnim=this._gameStartNode.getChildByName("error").getComponent(a),this._rightAnim=this._gameStartNode.getChildByName("right").getComponent(a),this._toggle=this._beginNode.getChildByName("Toggle").getComponent(r);var t=this;this._gameStartNode.getChildByName("btnBack").on(h.EventType.CLICK,(function(){t.gameExit()})),this._resultNode.getChildByName("btnAgain").on(h.EventType.CLICK,(function(){t.playAgain()}))},s.update=function(t){if(!this._isOver&&(this._deltaTime+=t,this._deltaTime>=.1)){this._time+=this._deltaTime;var e=Math.floor(1e3*this._time)/1e3;this._txtTime.string=e+"S",this._deltaTime=0}},s.playAgain=function(){this._resultNode.active=!1,this._isOver=!1,this.updatePosition()},s.gameExit=function(){this._curClickIdx=0,this._isOver=!0,this._indexList=[],this.clearItemGrid(),this._txtTime.string="",this._deltaTime=0,this._time=0,this._resultNode.active=!1,this._gameStartNode.active=!1,this._beginNode.active=!0,this._beginView.gameExit()},s.gameOver=function(){this._curClickIdx=0,this._isOver=!0,this._resultNode.active=!0;var t=Math.floor(1e3*this._time)/1e3;this.uploadResult(t),this._txtResultTime.string="您的成绩是："+t+"秒",this._txtTime.string="",this._deltaTime=0,this._time=0},s.uploadResult=function(t){var e={wxgame:{score:t,update_time:String(+new Date/1e3)},unitStr:"秒",order:1},i={key:"rank_"+c.Shulte,value:e};v.postMessage({type:"UploadScore",KVData:i})},s.onItemClick=function(t){if(!this._isOver)if(this._curClickIdx!=t){this._errorAnim.play("ClickError");var e=!0;this._clickRight&&(e=!1),u.soundMgr.play("error1",e),this._clickRight=!1}else{if(this._curClickIdx++,this._toggle.isChecked&&(this._itemNodes[t].active=!1),this._curClickIdx>=this._num)this.gameOver(),u.soundMgr.play("win");else{var i=!0;this._clickRight||(i=!1),this._rightAnim.play(),u.soundMgr.play("button1",i)}this._clickRight=!0}},s.updateGrid=function(){var t=this;this._isOver=!1;for(var e=this._curType,i=this._gameContainerSize.width,s=Math.floor(i/e),n=this,a=function(e){t._indexList.push(e);var i=t.getItemGrid();i.active=!0,t._gameContainer.addChild(i);var a=i.getComponent(o);a.width=s,a.height=s,i.getComponent(g).setIndex(e),t._itemNodes.push(i),i.targetOff(h.EventType.CLICK),i.on(h.EventType.CLICK,(function(){n.onItemClick(e)}))},r=0;r<this._num;r++)a(r);this.updatePosition()},s.updatePosition=function(){for(var t=this._curType,e=this._gameContainerSize.width,i=Math.floor(e/t),s=[],o=0;o<this._num;o++){var n=this._itemNodes[o];n.active||(n.active=!0);var a=Math.floor(this._indexList.length*Math.random()),r=this._indexList.splice(a,1)[0];s.push(r);var h=r%t*i,d=Math.floor(r/t)*-i;n.setPosition(h,d)}this._indexList=s},s.getItemGrid=function(){var t=i.ITEM_POOL.pop();if(!t){var e=d.get("prefab/ShulteGridItem");e?t=_(e):console.log("找不到资源")}return t},s.clearItemGrid=function(){for(var t=0;t<this._itemNodes.length;t++){var e=this._itemNodes[t];e.active=!1,i.ITEM_POOL.push(e)}this._itemNodes=[]},s.startGame=function(t){this._curType=t,this._num=t*t;var e="prefab/ShulteGridItem";if(d.get(e))this.updateGrid();else{var i=this;d.load(e,(function(){i.updateGrid()}))}},i}(m)).ITEM_POOL=[],p=f))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameState.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"b99d3hxMp5Jy5jvRpTC6LQB","GameState",void 0);e("GameState",function(e){return e[e.Home=1]="Home",e[e.Playing=2]="Playing",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/GameType.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"ee0dfn8ynpFNISFOEqfztvj","GameType",void 0);e("GameType",function(e){return e[e.Shulte=1001]="Shulte",e[e.Grid=1002]="Grid",e[e.Memory=1003]="Memory",e[e.Nullify=1004]="Nullify",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Main.ts","./WXSDK.ts","./TestScene.ts","./AudioPlayer.ts","./TweenManager.ts","./EventEnum.ts","./GameState.ts","./GameType.ts","./MainMenu.ts","./BaseController.ts","./BaseView.ts","./GameGridController.ts","./GameGridStartView.ts","./GameNumberController.ts","./GameNumberItem.ts","./GameNumberStartView.ts","./GameShulteController.ts","./GameShulteBeginView.ts","./GameShulteStartView.ts","./ShulteGridItem.ts","./EventManager.ts","./Mgr.ts","./SceneManager.ts","./SoundManager.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mgr.ts","./WXSDK.ts"],(function(t){var n,e,o,r,i,u;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.Component},function(t){i=t.default},function(t){u=t.default}],execute:function(){var c;e._RF.push({},"266d1KWP0ZCLKChJ5tvx1KM","Main",void 0);var a=o.ccclass;o.property,t("Main",a("Main")(c=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.start=function(){i.Init(),u.showShareMenu(),u.login()},o.update=function(t){},e}(r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/MainMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./EventEnum.ts","./GameType.ts","./GameState.ts","./Mgr.ts","./WXSDK.ts"],(function(t){var e,n,a,o,i,r,s,d,h,u,c,m,l,v,g;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,o=t.Sprite,i=t.Toggle,r=t.Button,s=t.assetManager,d=t.Texture2D,h=t.Component},function(t){u=t.EventManager},function(t){c=t.EventEnum},function(t){m=t.GameType},function(t){l=t.GameState},function(t){v=t.default},function(t){g=t.default}],execute:function(){var f;n._RF.push({},"d69f70BV2NEjagxbAXhqwVL","MainMenu",void 0);var C=a.ccclass;a.property,t("MainMenu",C("MainMenu")(f=function(t){function n(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this)._gameState=void 0,e._imgAvatar=void 0,e._btnLogin=void 0,e}e(n,t);var a=n.prototype;return a.update=function(t){},a.start=function(){var t=this;this._imgAvatar=this.node.getChildByPath("UserInfo/imgAvatar").getComponent(o);var e=this.node.getChildByName("muteToggle").getComponent(i),n=e.node.getChildByName("normal");e.node.on(i.EventType.TOGGLE,(function(){n.active=!e.isChecked,v.soundMgr.setMute(e.isChecked)})),this.node.getChildByName("btnShulte").on(r.EventType.CLICK,(function(){t.OnStartGame(m.Shulte)})),this.node.getChildByName("btnGrid").on(r.EventType.CLICK,(function(){t.OnStartGame(m.Grid),v.soundMgr.play("game_start")}));var a=this.node.getChildByName("btnNullify"),s=0,d=-1;a.on(r.EventType.CLICK,(function(){var e="别着急，已经在做了~";s++,-1==d&&(d=1+Math.round(10*Math.random())),s>=d+20?(e="有事？vme50（vx：lizhi5050）",s=0,d=1+Math.round(10*Math.random())):s>=d+12?e="休息一会儿吧~已经在加快速度了":s>=d+11?t.OnStartGame(m.Nullify):s>=d+10?e="这么期待？给你看一眼？":s>=d&&(e="别着急，已经在做了~"),g.showToast(e)}));var h=this.node.getChildByName("openDataContext");this.node.getChildByName("btnRank").on(r.EventType.CLICK,(function(){h.active=!0,g.showRank("rank_"+m.Shulte)})),this.node.getChildByName("btnWorldRank").on(r.EventType.CLICK,(function(){g.UserInfo?g.showToast("正在开发接入中..."):g.showToast("请先登录授权")})),h.getChildByName("btnClose").on(r.EventType.CLICK,(function(){h.active=!1})),h.getChildByName("btnShulteRank").on(r.EventType.CLICK,(function(){g.showRank("rank_"+m.Shulte)})),h.getChildByName("btnGridRank").on(r.EventType.CLICK,(function(){g.showRank("rank_"+m.Grid)})),this.node.getChildByName("btnTest").on(r.EventType.CLICK,(function(){v.sceneMgr.LoadScene("sceneTest")})),this.AddEvent(),this.SetGameState(l.Home),this.OnUserInfoUpdate()},a.AddEvent=function(){u.addListener(c.OnGameExit,this.OnGameExit,this),u.addListener(c.OnUserInfoUpdate,this.OnUserInfoUpdate,this)},a.OnUserInfoUpdate=function(){if(g.UserInfo){var t=this;s.loadRemote(g.UserInfo.avatarUrl+"?aaa=aa.jpg",(function(e,n){console.log("avatar loadComplete");var a=new d;a.image=n,t._imgAvatar.node.active=!0,t._imgAvatar.spriteFrame.texture=a}))}else this._imgAvatar.node.active=!1},a.OnStartGame=function(t){this._gameState!=l.Playing&&(this.SetGameState(l.Playing),u.dispatch(c.OnGameStart,t))},a.OnGameExit=function(){this.SetGameState(l.Home)},a.SetGameState=function(t){t==l.Home?this.node.active=!0:t==l.Playing&&(this.node.active=!1)},n}(h))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/Mgr.ts",["cc","./WXSDK.ts","./GameGridController.ts","./GameNumberController.ts","./GameShulteController.ts","./SceneManager.ts","./SoundManager.ts"],(function(n){var t,e,u,i,r,o,c;return{setters:[function(n){t=n.cclegacy},function(n){e=n.default},function(n){u=n.default},function(n){i=n.default},function(n){r=n.default},function(n){o=n.SceneManager},function(n){c=n.default}],execute:function(){t._RF.push({},"99ac55cqdtDb7pHu3bfqDaw","Mgr",void 0);var a=n("default",function(){function n(){}return n.Init=function(){n.isInit||(n.InitCtrl(),n.soundMgr=new c,n.sceneMgr=new o,e.CloudInit(),n.isInit=!0)},n.InitCtrl=function(){new r,new u,new i},n}());a.soundMgr=void 0,a.sceneMgr=void 0,a.isInit=!1,t._RF.pop()}}}));

System.register("chunks:///_virtual/SceneManager.ts",["cc"],(function(e){var n,c,t,a;return{setters:[function(e){n=e.cclegacy,c=e._decorator,t=e.director,a=e.utils}],execute:function(){n._RF.push({},"5287a+137ZKS7NBKEmKaYDr","SceneManager",void 0);c.ccclass,c.property,e("SceneManager",function(){function e(){this._mainSceneNode=void 0,this._mainSceneNode=a.find("Canvas"),t.addPersistRootNode(this._mainSceneNode)}return e.prototype.LoadScene=function(e){var n=this;t.loadScene(e,(function(e,c){"scene"==c.name?n._mainSceneNode.active=!0:n._mainSceneNode.active=!1}))},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ShulteGridItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,n,r,i,a,u;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,r=t.Sprite,i=t.math,a=t.Label,u=t.Component}],execute:function(){var c;e._RF.push({},"8921fJ0vHxORqhK3GZl92yR","ShulteGridItem",void 0);var h=n.ccclass;n.property,t("ShulteGridItem",h("ShulteGridItem")(c=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(o=t.call.apply(t,[this].concat(n))||this)._index=void 0,o._txtNum=void 0,o}o(e,t);var n=e.prototype;return n.onLoad=function(){var t=Math.floor((3*Math.random()+5)/10*255),o=Math.floor((2*Math.random()+7)/10*255),e=Math.floor((1.5*Math.random()+8)/10*255);this.getComponent(r).color=new i.Color(t,o,e),this._txtNum=this.node.getChildByName("txtNum").getComponent(a)},n.update=function(t){},n.setIndex=function(t){this._index=t,this._txtNum.string=(t+1).toString()},e}(u))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/SoundManager.ts",["cc","./AudioPlayer.ts"],(function(t){var n,o,i,e;return{setters:[function(t){n=t.cclegacy,o=t.utils,i=t.director},function(t){e=t.AudioPlayer}],execute:function(){n._RF.push({},"9b5c7cxlqBLULBFwM8IfXs3","SoundManager",void 0);t("default",function(){function t(){this._ap=void 0,this.init()}var n=t.prototype;return n.init=function(){var t=o.find("SoundManager");i.addPersistRootNode(t),t?this._ap=t.getComponent(e):console.log("sound不存在")},n.setMute=function(t){this._ap.setMute(t)},n.play=function(t,n){void 0===n&&(n=!0),this._ap.play(t,n)},n.playBGM=function(t){this._ap.playBGM(t)},n.stopBGM=function(){this._ap.stopBGM()},n.pause=function(){this._ap.onPause()},n.resume=function(){this._ap.onResume()},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/TestScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mgr.ts"],(function(e){var n,t,s,i,o,a;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,s=e._decorator,i=e.Button,o=e.Component},function(e){a=e.default}],execute:function(){var r;t._RF.push({},"32299fOfpxJmpj27iIBq/tA","TestScene",void 0);var u=s.ccclass;s.property,e("TestScene",u("TestScene")(r=function(e){function t(){for(var n,t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return(n=e.call.apply(e,[this].concat(s))||this)._isPlaying=void 0,n._isPause=void 0,n}n(t,e);var s=t.prototype;return s.start=function(){var e=this;this.node.getChildByName("btnPlay").on(i.EventType.CLICK,(function(){e._isPlaying?e._isPause&&a.soundMgr.resume():(e._isPlaying=!0,a.soundMgr.playBGM("bgm1"))})),this.node.getChildByName("btnPause").on(i.EventType.CLICK,(function(){e._isPlaying&&(a.soundMgr.pause(),this._isPause=!0)})),this.node.getChildByName("btnBack").on(i.EventType.CLICK,(function(){a.sceneMgr.LoadScene("scene")}))},s.onDestroy=function(){this._isPlaying=!1,this._isPause=!1,a.soundMgr.stopBGM()},s.update=function(e){},t}(o))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/TweenManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,s,o,r;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,s=t.game,o=t.UITransform,r=t.error}],execute:function(){i._RF.push({},"da12cDhFVtHvL4JEX8vVU8W","TweenManager",void 0);var n=function(){function t(){this._target=void 0,this._targetName=void 0,this._targetTransform=void 0,this._targetPos=void 0,this._targetScale=void 0,this._targetRotation=void 0,this._isTargetSelf=void 0,this._targetProps=void 0,this._steps=void 0,this._initialProps=void 0,this._stepProps=void 0,this._isStart=!1,this._stepTime=void 0,this._curStep=void 0,this._lastStep=void 0,this._loop=!1,this._loopCount=0,this._loopTotalCount=0,this._loopComplete=void 0,this._stepIdx=0,this._onChange=void 0,this._onChangeObj=void 0,this._tweenId=0,this.resetTime=0,this.timeIndex=-1}var i=t.prototype;return i.setProps=function(t){t&&(this._loopTotalCount=t.loopTotalCount,(t.loop||this._loopTotalCount&&this._loopTotalCount>0)&&(this._loop=!0),this._onChange=t.onChange,this._onChangeObj=t.onChangeObj,this._loopComplete=t._loopComplete)},i.setTarget=function(t,e){this._target=t,this._tweenId=e,this._initialProps=null},i.getTarget=function(){return this._target},i.to=function(t,e,i){if(this._target&&t&&"object"==typeof t&&e&&!(e<0)){if(!this._initialProps)for(var s in this._initialProps={},t)this._initialProps[s]=this.getTargetAttr(s);return this.addStep({type:"to",props:t,duration:e,ease:i}),this}},i.call=function(t,e,i){return this.addStep({type:"call",callBack:t,thisObj:e,params:i}),this},i.wait=function(t){return this.addStep({type:"wait",duration:t}),this},i.addStep=function(t){this._steps||(this._steps=[]),this._steps.push(t),this.beginTween()},i.beginTween=function(){this._isStart||(this._isStart=!0,this.getStep())},i.getStep=function(){if(this._isStart){if(this._loop){if(this._stepIdx>=this._steps.length){if(this._loopCount++,this._loopTotalCount&&this._loopTotalCount>0&&this._loopCount>=this._loopTotalCount)return this._loopComplete&&this._loopComplete.apply(this._curStep.thisObj),void this.stopAction();if(this._stepIdx=0,this._initialProps)for(var t in this._initialProps)this.setTargetAttr(t,this._initialProps[t]);this._lastStep=null}this._curStep=this._steps[this._stepIdx],this._stepIdx++}else this._curStep=this._steps.shift();if(this._lastStep&&this._lastStep.props)for(var e in this._lastStep.props)this.setTargetAttr(e,this._lastStep.props[e]);if(this._lastStep=this._curStep,this._curStep){if("call"==this._curStep.type)return this._curStep.callBack.apply(this._curStep.thisObj,this._curStep.params),void this.getStep();this._stepTime=s.totalTime+this._curStep.duration,this._stepProps={},this._targetProps={},this.runAction()}else this.stopAction()}},i.runAction=function(){if(-1==this.timeIndex){var t=this;this.timeIndex=setInterval((function(){var e=s.totalTime;if(e>=t._stepTime)t.getStep();else{if("to"==t._curStep.type){var i=t._curStep.props,o=(t._curStep.duration-(t._stepTime-e))/t._curStep.duration;for(var r in o=Math.min(o,1),t._curStep.ease&&(o=t._curStep.ease(o,0,1,1)),i){null==t._stepProps[r]&&(t._stepProps[r]=t.getTargetAttr(r));var n=i[r]-t._stepProps[r],a=t._stepProps[r]+n*o;t._targetProps[r]=a,t.setTargetAttr(r,a)}}t._onChange&&t._onChangeObj&&t._onChange.apply(t._onChangeObj,t._targetProps)}}),1)}},i.checkTargetAttr=function(t){var e="",i=this._target.__classname__.indexOf("cc.");if("object"==typeof this._target&&-1==i?this._target[t]?this._isTargetSelf=!0:e="not found "+t+" in tween target.":null==this._target?e="tween target is null":(this._targetTransform||(this._targetTransform=this._target.getComponent(o)),this._targetTransform||(e="not found transform in tween target. ----key："+t)),""==e&&("x"==t||"y"==t||"z"==t?this._targetPos||(this._targetPos=this._target.getPosition()):"scaleX"==t||"scaleY"==t||"scaleZ"==t?this._targetScale||(this._targetScale=this._target.getScale()):"rotationX"==t||"rotationY"==t||"rotationZ"==t?this._targetRotation||(this._targetRotation=this._target.getRotation()):"width"==t||"height"==t||this._target[t]||(e="not found "+t+" in tween target.")),""!=e){var s=this.getStepTestStr(this._curStep),n="";if(this._steps)for(var h=0;h<this._steps.length;h++)n=n+"(step"+h+")"+this.getStepTestStr(this._steps[h]);var _=this._targetName;a.RemoveTweenById(this._tweenId),r(e+"---\x3e>>targetName："+_+"，curStep："+s+"，stepList："+n)}},i.getStepTestStr=function(t){var e="";if(t){if(e=t.type,t.props)for(var i in t.props){e=e+"--\x3e"+i+"="+t.props[i]+","}t.duration&&(e=e+"time："+t.duration)}return e},i.setTargetAttr=function(t,e){this.checkTargetAttr(t),this._isTargetSelf?this._target[t]=e:"x"==t||"y"==t||"z"==t?(this._targetPos[t]=e,this._target.setPosition(this._targetPos)):"scaleX"==t||"scaleY"==t||"scaleZ"==t?(this._targetScale[a.GetTweenAttrName(t)]=e,this._target.setScale(this._targetScale)):"rotationX"==t||"rotationY"==t||"rotationZ"==t?(this._targetRotation[a.GetTweenAttrName(t)]=e,this._target.setRotation(this._targetRotation)):"width"==t||"height"==t?this._targetTransform[t]=e:this._target[t]&&(this._target[t]=e)},i.getTargetAttr=function(t){return this.checkTargetAttr(t),this._isTargetSelf?this._target[t]:"x"==t||"y"==t||"z"==t?this._targetPos[t]:"scaleX"==t||"scaleY"==t||"scaleZ"==t?this._targetScale[a.GetTweenAttrName(t)]:"rotationX"==t||"rotationY"==t||"rotationZ"==t?this._targetRotation[a.GetTweenAttrName(t)]:this._target[t]},i.stopAction=function(){this._isStart&&0!=this._tweenId&&a.RemoveTweenById(this._tweenId)},i.reset=function(){this._isStart&&(-1!=this.timeIndex&&(clearInterval(this.timeIndex),this.timeIndex=-1),this._stepIdx=0,this._loop=!1,this._loopTotalCount=-1,this._loopCount=0,this._loopComplete=null,this._onChangeObj=null,this._onChange=null,this.clearTarget(),this._initialProps={},this._steps=null,this._curStep=null,this._lastStep=null,this._isStart=!1,this._tweenId=0)},i.clearTarget=function(){this._target=null,this._targetPos=null,this._targetTransform=null,this._targetScale=null,this._targetRotation=null,this._isTargetSelf=!1,this._targetName=""},i.clearTargetByKey=function(t){"x"==t||"y"==t||"z"==t?this._targetPos=null:"scaleX"==t||"scaleY"==t||"scaleZ"==t?this._targetScale=null:"rotationX"==t||"rotationY"==t||"rotationZ"==t?this._targetRotation=null:"width"!=t&&"height"!=t||(this._targetTransform=null)},e(t,[{key:"tweenId",get:function(){return this._tweenId}}]),t}(),a=t("default",function(){function t(){}return t.getTween=function(){for(var e,i=s.totalTime,o=0;o<t.TweenPool.length;o++){if(i-t.TweenPool[o].resetTime>.034){e=t.TweenPool.shift();break}}return e||(e=new n),e},t.addTween=function(e,i){if(e){var s=t.getTween(),o=t.TweenId+1;return s.setTarget(e,o),s.setProps(i),t.TweenId=o,t.TweenList[o]=s,t.TweenTargets[o]=e,t.TweenCount++,s}},t.removeTweens=function(e){if(e)for(var i in t.TweenTargets){var s=Number(i);t.TweenTargets[s]==e&&t.RemoveTweenById(s)}},t.RemoveTweenById=function(e){if(e&&0!=e){var i=t.TweenList[e];i&&(i.reset(),t.TweenList[e]=null,t.TweenTargets[e]=null,t.TweenCount--,i.resetTime=s.totalTime,t.TweenPool.push(i))}},t.GetTweenAttrName=function(e){return t.TweenAttrMap[e]},t}());a.TweenPool=[],a.TweenAttrMap={scaleX:"x",scaleY:"y",scaleZ:"z",rotationX:"x",rotationY:"y",rotationZ:"z",width:"width",height:"height"},a.TweenId=0,a.TweenCount=0,a.TweenList={},a.TweenTargets={},i._RF.pop()}}}));

System.register("chunks:///_virtual/WXSDK.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./EventEnum.ts"],(function(e){var o,n,t,s,c;return{setters:[function(e){o=e.createClass},function(e){n=e.cclegacy,t=e.sys},function(e){s=e.EventManager},function(e){c=e.EventEnum}],execute:function(){n._RF.push({},"a39c6vly/dOa5N8IPYtknVB","WXSDK",void 0);var a=e("default",function(){function e(){}return e.login=function(){t.isMobile&&wx.getSetting({success:function(o){if(o.authSetting["scope.userInfo"])wx.getUserInfo({success:function(o){console.log("已授权用户信息",o),e.UserInfo=o.userInfo}});else{var n=wx.createUserInfoButton({type:"text",text:"登录",style:{left:25,top:25,width:50,height:50,lineHeight:50,backgroundColor:"#ffffff",color:"#000000",textAlign:"center",fontSize:18,borderRadius:4}});n.onTap((function(o){console.log("已主动授权用户信息",o),o.userInfo?(e.showToast("登录成功"),e.UserInfo=o.userInfo,n.destroy()):e.showToast("取消登录")}))}}})},e.showRank=function(o){e.postMessage({type:"ShowRank",width:1080,height:1800,x:540,y:1080,rankKey:o})},e.postMessage=function(e){t.isMobile&&wx.postMessage(e)},e.setUserCloudStorage=function(e){t.isMobile&&wx.setUserCloudStorage(e)},e.showToast=function(e,o,n){void 0===e&&(e=""),void 0===o&&(o=2e3),void 0===n&&(n="none"),t.isMobile?wx.showToast({title:e,icon:n,duration:o}):console.log(e)},e.showShareMenu=function(){t.isMobile&&wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"],success:function(e){console.log("share success:",e)},complete:function(e){console.log("share complete:",e)}})},e.CloudInit=function(){t.isMobile&&wx.cloud.init({env:"cloud1-0gg6h5ch5e3c80fc"})},e.UploadUserGameData=function(o){t.isMobile&&e.WXCloudPost(o)},e.WXCloudPost=function(o){if(e.UserInfo&&o&&!(o.score<=0)){var n=e.UserInfo;wx.cloud.callContainer({config:{env:"prod-2gue9n1kd74122cb"},path:"/api/user_game_data",header:{"X-WX-SERVICE":"express-589u"},data:{game_data:o,user_info:n},method:"POST",timeout:15e3,complete:function(e){console.log("POST callContainer user_game_data",e)}})}},e.WXCloudGet=function(e){wx.cloud.callContainer({config:{env:"prod-2gue9n1kd74122cb"},path:"/api/user_game_data",header:{"X-WX-SERVICE":"express-589u"},data:{game_type:e},method:"GET",timeout:15e3,complete:function(e){console.log("GET callContainer user_game_data",e)}})},e.PlatformCheck=function(){return t.isMobile},o(e,null,[{key:"DB",get:function(){return e.DBInstance||(e.DBInstance=wx.cloud.database()),e.DBInstance}},{key:"UserInfo",get:function(){return e._UserInfo},set:function(o){e._UserInfo=o,s.dispatch(c.OnUserInfoUpdate)}}]),e}());a.CloudId="cloud1-0gg6h5ch5e3c80fc",a.ShareTicket="",a._UserInfo=void 0,a.DBInstance=void 0,n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});