{"version":3,"sources":["file:///G:/Work/cocoscreator/MiniGame/assets/script/game/MainMenu.ts"],"names":["_decorator","Component","EventManager","EventEnum","GameType","ccclass","property","MainMenu","_homeEntity","_gameState","update","deltaTime","start","addListener","OnGameExit","GameUI","FindChild","entity","self","btnShulte","node","getChildByName","engine","UIButton","_btnShulte","onClick","add","OnStartGame","Shulte","btnGridGame","Grid","Mgr","soundMgr","play","SetGameState","GameState","Home","type","Playing","dispatch","OnGameStart","state","active"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAoBC,MAAAA,S,OAAAA,S;;AACpBC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;0BAGjBO,Q,WADZF,OAAO,CAAC,UAAD,C,gBAAR,MACaE,QADb,SAC8BN,SAD9B,CACwC;AAAA;AAAA;AAAA,eAE5BO,WAF4B;AAAA,eAG5BC,UAH4B;AAAA;;AAIpCC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AACMC,QAAAA,KAAK,GAAE;AACV;AAAA;AAAA,4CAAaC,WAAb,CAAyB;AAAA;AAAA,sCAAUC,UAAnC,EAA8C,KAAKA,UAAnD,EAA8D,IAA9D;AACA,eAAKN,WAAL,GAAmBO,MAAM,CAACC,SAAP,CAAiB,KAAKC,MAAtB,EAA6B,MAA7B,CAAnB;AAEA,cAAIC,IAAI,GAAG,IAAX;AACA,cAAIC,SAAS,GAAG,KAAKC,IAAL,CAAUC,cAAV,CAAyB,gBAAzB,CAAhB;AAA2DN,UAAAA,MAAM,CAACC,SAAP,CAAiB,KAAKC,MAAtB,EAA6B,gBAA7B,EAA8CK,MAAM,CAACC,QAArD;;AAC3D,eAAKC,UAAL,CAAgBC,OAAhB,CAAwBC,GAAxB,CAA4B,YAAU;AAClCR,YAAAA,IAAI,CAACS,WAAL,CAAiB;AAAA;AAAA,sCAASC,MAA1B;AACH,WAFD;;AAIA,cAAIC,WAAW,GAAGd,MAAM,CAACC,SAAP,CAAiB,KAAKC,MAAtB,EAA6B,kBAA7B,EAAgDK,MAAM,CAACC,QAAvD,CAAlB;AACAM,UAAAA,WAAW,CAACJ,OAAZ,CAAoBC,GAApB,CAAwB,YAAU;AAC9BR,YAAAA,IAAI,CAACS,WAAL,CAAiB;AAAA;AAAA,sCAASG,IAA1B;AACAC,YAAAA,GAAG,CAACC,QAAJ,CAAaC,IAAb,CAAkB,YAAlB;AACH,WAHD;AAKA,eAAKC,YAAL,CAAkBC,SAAS,CAACC,IAA5B;AACH;;AAEOT,QAAAA,WAAW,CAACU,IAAD,EAAe;AAC9B,cAAG,KAAK5B,UAAL,IAAmB0B,SAAS,CAACG,OAAhC,EAAwC;AACpC;AACH;;AACD,eAAKJ,YAAL,CAAkBC,SAAS,CAACG,OAA5B;AACA;AAAA;AAAA,4CAAaC,QAAb,CAAsB;AAAA;AAAA,sCAAUC,WAAhC,EAA4CH,IAA5C;AACH;;AAEOvB,QAAAA,UAAU,GAAE;AAChB,eAAKoB,YAAL,CAAkBC,SAAS,CAACC,IAA5B;AACH;;AAEOF,QAAAA,YAAY,CAACO,KAAD,EAAiB;AACjC,cAAGA,KAAK,IAAIN,SAAS,CAACC,IAAtB,EAA2B;AACvB,iBAAKhB,IAAL,CAAUsB,MAAV,GAAmB,IAAnB;AACH,WAFD,MAGK,IAAGD,KAAK,IAAIN,SAAS,CAACG,OAAtB,EAA8B;AAC/B,iBAAKlB,IAAL,CAAUsB,MAAV,GAAmB,KAAnB;AACH;AACJ;;AA7CmC,O","sourcesContent":["import { _decorator, Button, Component, Node } from 'cc';\r\nimport { EventManager } from '../manager/EventManager';\r\nimport { EventEnum } from '../enum/EventEnum';\r\nimport { GameType } from '../enum/GameType';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MainMenu')\r\nexport class MainMenu extends Component {\r\n    \r\n    private _homeEntity:Node;\r\n    private _gameState:GameState;\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n    public start(){\r\n        EventManager.addListener(EventEnum.OnGameExit,this.OnGameExit,this);\r\n        this._homeEntity = GameUI.FindChild(this.entity,\"Home\");\r\n\r\n        let self = this;\r\n        let btnShulte = this.node.getChildByName(\"Home/btnShulte\");GameUI.FindChild(this.entity,\"Home/btnShulte\",engine.UIButton);\r\n        this._btnShulte.onClick.add(function(){\r\n            self.OnStartGame(GameType.Shulte);\r\n        });\r\n\r\n        let btnGridGame = GameUI.FindChild(this.entity,\"Home/btnGridGame\",engine.UIButton);\r\n        btnGridGame.onClick.add(function(){\r\n            self.OnStartGame(GameType.Grid);\r\n            Mgr.soundMgr.play(\"game_start\");\r\n        });\r\n        \r\n        this.SetGameState(GameState.Home);\r\n    }\r\n\r\n    private OnStartGame(type:GameType){\r\n        if(this._gameState == GameState.Playing){\r\n            return;\r\n        }\r\n        this.SetGameState(GameState.Playing);\r\n        EventManager.dispatch(EventEnum.OnGameStart,type);\r\n    }\r\n\r\n    private OnGameExit(){\r\n        this.SetGameState(GameState.Home);\r\n    }\r\n\r\n    private SetGameState(state:GameState){\r\n        if(state == GameState.Home){\r\n            this.node.active = true;\r\n        }\r\n        else if(state == GameState.Playing){\r\n            this.node.active = false;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n"]}