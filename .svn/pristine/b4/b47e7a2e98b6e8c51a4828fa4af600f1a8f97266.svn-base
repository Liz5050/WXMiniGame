{"version":3,"sources":["file:///G:/Work/cocoscreator/MiniGame/assets/script/game/gameShulte/view/GameShulteBeginView.ts"],"names":["BtnType","_decorator","Component","Mgr","ccclass","property","GameShulteBeginView","_itemContainer","_beginEntity","_gameStartEntity","_beginAnim","_gameStart","_curTypeIdx","_num","_btns","_itemEntitys","_typeList","_isStart","update","deltaTime","start","console","log","getComponent","GameShulteStart","self","muteToggle","GameUI","FindChild","entity","engine","UIToggle","soundNormal","onClick","add","comp","event","active","isChecked","soundMgr","setMute","transform2D","i","length","type","btn","btnEntity","init","btnCom","UIButton","setIndex","push","btnStart","OnStartClick","btnExit","EventManager","dispatch","EventEnum","OnGameExit","GameType","Shulte","startGame","gameExit","index","clearShowGrid","setSelected","curType","url","loader","getAsset","updateShowGrid","load","promise","then","prefabAsset","width","sizeX","curSize","Math","floor","canShowGrid","itemEntity","getShowItemGrid","addChild","sizeY","col","row","x","y","position","ItemGrid","GameShulteBegin","ITEM_POOL","pop","instantiate","Array","_isSelected","_index","_type","_itemEntity","_normalEntity","_selectedEntity","_btnItem","consturctor","initUI","txtType","UILabel","text","isSelected"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node } from 'cc';\r\nimport Mgr from '../../../manager/Mgr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GameShulteBeginView')\r\nexport class GameShulteBeginView extends Component {\r\n    \r\n    private static ITEM_POOL:Array<engine.Entity> = new Array();\r\n    private _itemContainer:engine.Transform2D;\r\n\r\n    private _beginEntity:engine.Entity;\r\n    private _gameStartEntity:engine.Entity;\r\n\r\n    private _beginAnim:engine.Animator;\r\n    private _gameStart:GameShulteStart;\r\n\r\n    private _curTypeIdx:number = -1;\r\n    private _num:number;\r\n    private _btns:BtnType[] = [];\r\n    private _itemEntitys:engine.Entity[] = [];\r\n    private _typeList:number[] = [3,4,5,6,7,8];\r\n\r\n    private _isStart:boolean = false;\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n\r\n    public start() {\r\n      console.log(\"onStart\");\r\n      this._gameStart = this.getComponent(GameShulteStart);\r\n\r\n      let self = this;\r\n      let muteToggle:engine.UIToggle = GameUI.FindChild(this.entity,\"MuteToggle\",engine.UIToggle);\r\n      let soundNormal:engine.Entity = GameUI.FindChild(muteToggle.entity,\"Normal\");//this.entity.transform2D.findChildByName(\"MuteToggle/Normal\").entity;\r\n      muteToggle.onClick.add(function(comp,event){\r\n          soundNormal.active = !muteToggle.isChecked;\r\n          Mgr.soundMgr.setMute(muteToggle.isChecked);\r\n      });\r\n      \r\n\r\n      this._gameStartEntity = GameUI.FindChild(this.entity,\"GameStart\");\r\n      this._gameStartEntity.active = false;\r\n\r\n      this._beginEntity = GameUI.FindChild(this.entity,\"Begin\");\r\n      this._beginEntity.active = true;\r\n      \r\n      this._itemContainer = GameUI.FindChild(this.entity,\"Begin/Group/GridGroup\").transform2D;\r\n      for (let i = 0; i < this._typeList.length; i++) {\r\n          let type = this._typeList[i];\r\n          let btn:BtnType = new BtnType();\r\n          let btnEntity:engine.Entity = GameUI.FindChild(this.entity,\"Begin/TypeGroup/btns/btnType\" + (i+1));\r\n          btn.init(btnEntity,type,i);\r\n\r\n          let btnCom:engine.UIButton = btnEntity.getComponent(engine.UIButton);\r\n          btnCom.onClick.add(function(){\r\n              self.setIndex(i);\r\n          });\r\n          this._btns.push(btn);\r\n      }\r\n      \r\n      let btnStart:engine.UIButton = GameUI.FindChild(this.entity,\"Begin/Group/btnStart\",engine.UIButton);\r\n      btnStart.onClick.add(function(){\r\n          self.OnStartClick();\r\n      });\r\n\r\n      let btnExit:engine.UIButton = GameUI.FindChild(this.entity,\"Begin/btnExit\",engine.UIButton);\r\n      btnExit.onClick.add(function(){\r\n        //退出前回到初始化状态\r\n        self.setIndex(0);\r\n        self.entity.active = false;\r\n        EventManager.dispatch(EventEnum.OnGameExit,GameType.Shulte);\r\n      });\r\n      this.setIndex(0);\r\n  }\r\n\r\n  private OnStartClick(){\r\n      if(this._isStart) return;\r\n      console.log(\"开始游戏\");\r\n      this._gameStartEntity.active = true;\r\n      this._beginEntity.active = false;\r\n      this._gameStart.startGame(this._typeList[this._curTypeIdx]);\r\n      this._isStart = true;\r\n  }\r\n\r\n  public gameExit(){\r\n      this._isStart = false;\r\n  }\r\n\r\n  private setIndex(index:number){\r\n      if(this._curTypeIdx == index) return;\r\n      if(this._curTypeIdx >= 0){\r\n          this.clearShowGrid();\r\n          this._btns[this._curTypeIdx].setSelected(false);\r\n      }\r\n      this._curTypeIdx = index;\r\n      this._btns[index].setSelected(true);\r\n      let curType:number = this._typeList[index];\r\n      this._num = curType * curType;\r\n\r\n      let url:string = 'Resources/Prefabs/ItemShowGrid.prefab';\r\n      if(engine.loader.getAsset(url)){\r\n          this.updateShowGrid();\r\n      }else{\r\n          let self = this;\r\n          engine.loader.load(url).promise.then((prefabAsset:engine.Prefab) => {\r\n              // 将 prefab 资源实例化\r\n              console.log(\"#######加载成功\");\r\n              self.updateShowGrid();\r\n          })\r\n      }\r\n  }\r\n\r\n  private updateShowGrid(){\r\n      let curType = this._typeList[this._curTypeIdx];\r\n      let width = this._itemContainer.sizeX;\r\n      // let offset = this._systemInfo.screenWidth / 1080;\r\n      let curSize = Math.floor(width / curType);// * offset;\r\n      \r\n      for (let i = 0; i < this._num; i++) {\r\n          if(!this.canShowGrid(i)) continue;\r\n          let itemEntity:engine.Entity = this.getShowItemGrid();\r\n          itemEntity.active = true;\r\n          this._itemContainer.addChild(itemEntity.transform2D);\r\n          itemEntity.transform2D.sizeX = curSize;\r\n          itemEntity.transform2D.sizeY = curSize;\r\n          \r\n          let col = i % curType;\r\n          let row = Math.floor(i / curType);\r\n          let x = col * curSize;\r\n          let y = row * - curSize;\r\n          itemEntity.transform2D.position.x = x;\r\n          itemEntity.transform2D.position.y = y;\r\n\r\n          (itemEntity.getComponent(ItemGrid) as ItemGrid).setIndex(i);\r\n          this._itemEntitys.push(itemEntity);\r\n      }\r\n  }\r\n\r\n  private getShowItemGrid():engine.Entity{\r\n      let entity:engine.Entity = GameShulteBegin.ITEM_POOL.pop();\r\n      if(!entity){\r\n          let prefabAsset:engine.Prefab = engine.loader.getAsset(\"Resources/Prefabs/ItemShowGrid.prefab\");\r\n          if(prefabAsset){\r\n              entity = prefabAsset.instantiate();\r\n          }\r\n          else{\r\n              console.log(\"找不到资源\");\r\n          }\r\n      }\r\n      return entity;\r\n  }\r\n\r\n  private clearShowGrid(){\r\n      for (let i = 0; i < this._itemEntitys.length; i++) {\r\n          let entity = this._itemEntitys[i];\r\n          entity.active = false;\r\n          GameShulteBegin.ITEM_POOL.push(entity);\r\n      }\r\n      this._itemEntitys = [];\r\n  }\r\n\r\n  private canShowGrid(index:number) {\r\n      let curType:number = this._typeList[this._curTypeIdx];\r\n      if (curType == 3)\r\n      {\r\n          return index != 4;\r\n      }\r\n      if (curType == 4)\r\n      {\r\n          return index != 5 && index != 6 && index != 9 && index != 10;\r\n      }\r\n      if (curType == 5)\r\n      {\r\n          return (index < 6 || index > 8) && (index < 11 || index > 13) && (index < 16 || index > 18);\r\n      }\r\n      if (curType == 6)\r\n      {\r\n          return index != 14 && index != 15 && index != 20 && index != 21;\r\n      }\r\n      if (curType == 7)\r\n      {\r\n          return (index < 16 || index > 18) && (index < 23 || index > 25) && (index < 30 || index > 32);\r\n      }\r\n      return (index < 18 || index > 21) && (index < 26 || index > 29) && (index < 34 || index > 37) && (index < 42 || index > 45);\r\n  }\r\n}\r\n\r\nclass BtnType {\r\n  private _isSelected:boolean;\r\n  private _index:number;\r\n  private _type:number;\r\n  private _itemEntity:engine.Entity;\r\n  private _normalEntity:engine.Entity;\r\n  private _selectedEntity:engine.Entity;\r\n  private _btnItem:engine.UIButton;\r\n\r\n  public consturctor(){\r\n\r\n  }\r\n\r\n  public init(entity:engine.Entity,type:number,index:number){\r\n      this._itemEntity = entity;\r\n      this._type = type;\r\n      this._index = index;\r\n      this.initUI();\r\n  }\r\n\r\n  private initUI(){\r\n      this._normalEntity = GameUI.FindChild(this._itemEntity,\"normal\");\r\n      this._selectedEntity = GameUI.FindChild(this._itemEntity,\"selected\");\r\n      let txtType:engine.UILabel = GameUI.FindChild(this._itemEntity,\"txtType\",engine.UILabel);\r\n      txtType.text = this._type + \"X\" + this._type;\r\n      this._btnItem = GameUI.FindChild(this._itemEntity,\"\",engine.UIButton);\r\n  }\r\n\r\n  public setSelected(isSelected:boolean){\r\n      if (this._isSelected == isSelected){\r\n          return;\r\n      }\r\n      this._normalEntity.active = !isSelected;\r\n      this._selectedEntity.active = isSelected;\r\n      this._isSelected = isSelected;\r\n  }\r\n}\r\n\r\n\r\n"]}