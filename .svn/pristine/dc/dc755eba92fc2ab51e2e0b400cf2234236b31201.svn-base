{"version":3,"sources":["file:///G:/Work/cocoscreator/MiniGame/assets/script/common/TweenManager.ts"],"names":["GTween","TweenManager","UITransform","error","game","constructor","_target","_targetName","_targetTransform","_targetPos","_targetScale","_targetRotation","_isTargetSelf","_targetProps","_steps","_initialProps","_stepProps","_isStart","_stepTime","_curStep","_lastStep","_loop","_loopCount","_loopTotalCount","_loopComplete","_stepIdx","_onChange","_onChangeObj","_tweenId","resetTime","timeIndex","setProps","props","loopTotalCount","loop","onChange","onChangeObj","setTarget","t","tweenId","getTarget","to","duration","ease","key","getTargetAttr","addStep","type","call","callback","thisObj","params","callBack","wait","time","step","push","beginTween","getStep","length","apply","stopAction","setTargetAttr","shift","totalTime","runAction","self","setInterval","curTime","ratio","Math","min","keyName","undefined","diff","value","checkTargetAttr","k","errorTips","ccIdx","__classname__","indexOf","getComponent","getPosition","getScale","getRotation","curStepStr","getStepTestStr","stepStr","i","targetName","RemoveTweenById","v","setPosition","GetTweenAttrName","setScale","setRotation","reset","clearInterval","clearTarget","clearTargetByKey","getTween","tw","TweenPool","pool","addTween","target","TweenId","TweenList","TweenTargets","TweenCount","removeTweens","id","Number","attrName","TweenAttrMap","scaleX","scaleY","scaleZ","rotationX","rotationY","rotationZ","width","height"],"mappings":"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","sourcesContent":["import { Component, Director, UITransform, _decorator, director, error, game, math } from \"cc\";\r\n\r\n/**\r\n * 对象池管理缓动\r\n * @author Liz 2019年4月18日21:10:57\r\n */\r\nclass GTween {\r\n\tprivate _target:any;\r\n    private _targetName:string;\r\n    private _targetTransform:UITransform;\r\n    private _targetPos:math.Vec3;\r\n    private _targetScale:math.Vec3;\r\n    private _targetRotation:math.Vec3;\r\n    private _isTargetSelf:boolean;\r\n    private _targetProps:any;\r\n\r\n\tprivate _steps:any[];\r\n\tprivate _initialProps:any;\r\n\tprivate _stepProps:any;\r\n\tprivate _isStart:boolean = false;\r\n\tprivate _stepTime:number;\r\n\tprivate _curStep:any;\r\n\tprivate _lastStep:any;\r\n\r\n\tprivate _loop:boolean = false;\r\n    private _loopCount:number = 0;\r\n    private _loopTotalCount:number = 0;\r\n    private _loopComplete:Function;\r\n\tprivate _stepIdx:number = 0;\r\n\tprivate _onChange:Function;\r\n\tprivate _onChangeObj:any;\r\n    private _tweenId:number = 0;\r\n    public resetTime:number = 0;\r\n\tpublic constructor() {\r\n\t}\r\n\r\n\tpublic setProps(props:any):void {\r\n\t\tif(!props) return;\r\n        this._loopTotalCount = props.loopTotalCount;\r\n        if(props.loop || (this._loopTotalCount && this._loopTotalCount > 0)){\r\n            this._loop = true;\r\n        }\r\n\t\tthis._onChange = props.onChange;\r\n\t\tthis._onChangeObj = props.onChangeObj;\r\n        this._loopComplete = props._loopComplete;\r\n\t}\r\n\r\n\tpublic setTarget(t:any,tweenId:number) {\r\n\t\tthis._target = t;\r\n        this._tweenId = tweenId;\r\n\t\tthis._initialProps = null;\r\n\t}\r\n\r\n    public get tweenId():number {\r\n        return this._tweenId;\r\n    }\r\n\r\n\tpublic getTarget():any {\r\n\t\treturn this._target;\r\n\t}\r\n\r\n\tpublic to(props:any,duration?:number,ease?: Function):GTween {\r\n\t\tif(!this._target) return;\r\n\t\tif(!props || typeof(props) != \"object\") return;\r\n\t\tif(!duration || duration < 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n        if(!this._initialProps){\r\n            this._initialProps = {}\r\n            for(let key in props) {\r\n                this._initialProps[key] = this.getTargetAttr(key);\r\n                // this.clearTargetByKey(key);\r\n            }\r\n        }\r\n\t\tthis.addStep({\r\n\t\t\ttype:\"to\",\r\n\t\t\tprops:props,\r\n\t\t\tduration:duration,\r\n\t\t\tease:ease});\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic call(callback: Function, thisObj?: any, params?: any[]):GTween {\r\n\t\tthis.addStep({\r\n\t\t\ttype : \"call\",\r\n\t\t\tcallBack : callback,\r\n\t\t\tthisObj : thisObj,\r\n\t\t\tparams : params});\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic wait(time:number):GTween {\r\n\t\tthis.addStep({\r\n\t\t\ttype : \"wait\",\r\n\t\t\tduration : time});\r\n\t\treturn this;\r\n\t}\r\n\r\n\tprivate addStep(step:any):void {\r\n\t\tif(!this._steps) {\r\n\t\t\tthis._steps = [];\r\n\t\t}\r\n\t\tthis._steps.push(step);\r\n\t\tthis.beginTween();\r\n\t}\r\n\t\r\n\tprivate beginTween():void {\r\n\t\tif(this._isStart) return;\r\n\t\tthis._isStart = true;\r\n\t\tthis.getStep();\r\n\t}\r\n\r\n\tprivate getStep():void {\r\n\t\tif(!this._isStart) return;\r\n\t\tif(this._loop) {\r\n\t\t\tif(this._stepIdx >= this._steps.length) {\r\n                this._loopCount ++;\r\n                if(this._loopTotalCount && this._loopTotalCount > 0 && this._loopCount >= this._loopTotalCount){\r\n                    //loopComplete\r\n                    if(this._loopComplete){\r\n                        this._loopComplete.apply(this._curStep.thisObj);\r\n                        // this._loopComplete.call();\r\n                    }\r\n                    this.stopAction();\r\n                    return\r\n                }\r\n\t\t\t\tthis._stepIdx = 0;\r\n                if(this._initialProps){\r\n                    for(let key in this._initialProps) {\r\n                        this.setTargetAttr(key,this._initialProps[key]);\r\n                        // this._target[key] = this._initialProps[key];\r\n                    }\r\n                }\r\n                //一轮循环结束，属性已经重设到初始值，不用校正\r\n                this._lastStep = null;\r\n\t\t\t}\r\n\t\t\tthis._curStep = this._steps[this._stepIdx];\r\n\t\t\tthis._stepIdx ++;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._curStep = this._steps.shift();\r\n\t\t}\r\n\t\t//属性校正\r\n\t\tif(this._lastStep && this._lastStep.props) {\r\n\t\t\tfor(let key in this._lastStep.props) {\r\n\t\t\t\t// this._target[key] = this._lastStep.props[key];\r\n                this.setTargetAttr(key,this._lastStep.props[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._lastStep = this._curStep;\r\n\t\tif(!this._curStep) {\r\n\t\t\tthis.stopAction();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(this._curStep.type == \"call\") {\r\n\t\t\tthis._curStep.callBack.apply(this._curStep.thisObj,this._curStep.params);\r\n\t\t\tthis.getStep();\r\n\t\t\treturn;\r\n        }\r\n\t\tthis._stepTime = game.totalTime + this._curStep.duration;\r\n\t\tthis._stepProps = {};\r\n\t\tthis.runAction();\r\n\t}\r\n\r\n\tprivate timeIndex:number = -1;\r\n\tprivate runAction():void {\r\n\t\tif(this.timeIndex == -1) {\r\n            let self = this;\r\n\t\t\tthis.timeIndex = setInterval(function(){\r\n\t\t\t\tlet curTime:number = game.totalTime;\r\n\t\t\t\tif(curTime >= self._stepTime){\r\n\t\t\t\t\tself.getStep();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(self._curStep.type == \"to\") {\r\n\t\t\t\t\tlet props:any = self._curStep.props;\r\n\t\t\t\t\tlet ratio:number = (self._curStep.duration - (self._stepTime - curTime)) / self._curStep.duration;\r\n\t\t\t\t\tratio = Math.min(ratio,1);\r\n\t\t\t\t\tif(self._curStep.ease) {\r\n\t\t\t\t\t\tratio = self._curStep.ease(ratio,0,1,1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(let keyName in props) {\r\n\t\t\t\t\t\tif(self._stepProps[keyName] == undefined) {\r\n\t\t\t\t\t\t\tself._stepProps[keyName] = self.getTargetAttr(keyName);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet diff:number = props[keyName] - self._stepProps[keyName];\r\n                        let value = self._stepProps[keyName] + (diff * ratio);\r\n                        self._targetProps[keyName] = value;\r\n                        self.setTargetAttr(keyName,value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(self._onChange && self._onChangeObj) {\r\n\t\t\t\t\tself._onChange.apply(self._onChangeObj,self._targetProps);\r\n\t\t\t\t}\r\n\t\t\t},1);\r\n\t\t}\r\n\t}\r\n\r\n    private checkTargetAttr(k:string){\r\n        let errorTips = \"\";\r\n        let ccIdx:number = this._target.__classname__.indexOf(\"cc.\");\r\n        if (typeof(this._target) == \"object\" && ccIdx == -1){\r\n            if(this._target[k]){\r\n                this._isTargetSelf = true\r\n            }\r\n            else{\r\n                errorTips = \"not found \" + k + \" in tween target.\";\r\n            }\r\n        }else{\r\n            if(this._target == null){\r\n                errorTips = \"tween target is null\";\r\n            }\r\n            else{\r\n                if(!this._targetTransform){\r\n                    this._targetTransform = this._target.getComponent(UITransform);\r\n                }\r\n                if(!this._targetTransform){\r\n                    errorTips = \"not found transform in tween target. ----key：\" + k;\r\n                }\r\n            }\r\n        }\r\n\r\n        if(errorTips == \"\"){\r\n            if(k == \"x\" || k == \"y\" || k == \"z\"){\r\n                if(!this._targetPos){\r\n                    this._targetPos = this._target.getPosition();\r\n                }\r\n            }\r\n            else if(k == \"scaleX\" || k == \"scaleY\" || k == \"scaleZ\"){\r\n                if(!this._targetScale){\r\n                    this._targetScale = this._target.getScale();\r\n                }\r\n            }\r\n            else if(k == \"rotationX\" || k == \"rotationY\" || k == \"rotationZ\"){\r\n                if(!this._targetRotation){\r\n                    this._targetRotation = this._target.getRotation();\r\n                }\r\n            }\r\n            else if(k == \"width\" || k == \"height\"){\r\n               \r\n            }\r\n            else if(!this._target[k]){\r\n                errorTips = \"not found \" + k + \" in tween target.\";\r\n            }\r\n        }\r\n        if(errorTips != \"\"){\r\n            let curStepStr:string = this.getStepTestStr(this._curStep);\r\n            let stepStr:string = \"\";\r\n            if(this._steps){\r\n                for(let i:number = 0; i < this._steps.length; i ++){\r\n                    stepStr = stepStr + \"(step\" + i + \")\" + this.getStepTestStr(this._steps[i]);\r\n                }\r\n            }\r\n            let targetName = this._targetName;\r\n            TweenManager.RemoveTweenById(this._tweenId);\r\n            error(errorTips + \"--->>>targetName：\" + targetName + \"，curStep：\" + curStepStr + \"，stepList：\" + stepStr);\r\n        }\r\n    }\r\n\r\n    private getStepTestStr(step:any):string{\r\n        let stepStr:string = \"\";\r\n        if(step){\r\n            stepStr = step.type\r\n            if(step.props){\r\n                for (let key in step.props) {\r\n                    let v = step.props[key];\r\n                    stepStr = stepStr + \"-->\" + key + \"=\" + v + \",\";\r\n                }\r\n            }\r\n            if(step.duration){\r\n                stepStr = stepStr + \"time：\" + step.duration;\r\n            }\r\n        }\r\n        return stepStr;\r\n    }\r\n\r\n    private setTargetAttr(k: string,v: any){\r\n        this.checkTargetAttr(k);\r\n        if(this._isTargetSelf){\r\n            this._target[k] = v;\r\n            return;\r\n        }\r\n        if(k == \"x\" || k == \"y\" || k == \"z\"){\r\n            this._targetPos[k] = v;\r\n            this._target.setPosition(this._targetPos);\r\n        }\r\n        else if(k == \"scaleX\" || k == \"scaleY\" || k == \"scaleZ\"){\r\n            this._targetScale[TweenManager.GetTweenAttrName(k)] = v;\r\n            this._target.setScale(this._targetScale);\r\n        }\r\n        else if(k == \"rotationX\" || k == \"rotationY\" || k == \"rotationZ\"){\r\n            this._targetRotation[TweenManager.GetTweenAttrName(k)] = v;\r\n            this._target.setRotation(this._targetRotation);\r\n        }\r\n        else if(k == \"width\" || k == \"height\"){\r\n            this._targetTransform[k] = v;\r\n        }\r\n        else if(this._target[k]){\r\n            this._target[k] = v;\r\n        }\r\n    }\r\n\r\n    private getTargetAttr(k){\r\n        this.checkTargetAttr(k);\r\n        if(this._isTargetSelf){\r\n            return this._target[k];\r\n        }\r\n        if(k == \"x\" || k == \"y\" || k == \"z\"){\r\n            return this._targetPos[k];\r\n        }\r\n        else if(k == \"scaleX\" || k == \"scaleY\" || k == \"scaleZ\"){\r\n            return this._targetScale[TweenManager.GetTweenAttrName(k)];\r\n        }\r\n        else if(k == \"rotationX\" || k == \"rotationY\" || k == \"rotationZ\"){\r\n            return this._targetRotation[TweenManager.GetTweenAttrName(k)];\r\n        }\r\n        else{\r\n            return this._target[k];\r\n        }\r\n    }\r\n\r\n\tprivate stopAction():void {\r\n        // if not self.isStart or self.tweenId == 0 then return end\r\n\t\t//     TweenUtil.RemoveTween(self.tweenId)\r\n\t\tif(!this._isStart || this._tweenId == 0) return;\r\n\t\tTweenManager.RemoveTweenById(this._tweenId);\r\n\t}\r\n\r\n\tpublic reset():void {\r\n\t\tif(!this._isStart) return;\r\n\t\tif(this.timeIndex != -1) {\r\n            clearInterval(this.timeIndex);\r\n\t\t\tthis.timeIndex = -1;\r\n\t\t}\r\n\t\tthis._stepIdx = 0;\r\n\t\tthis._loop = false;\r\n        this._loopTotalCount = -1;\r\n        this._loopCount = 0;\r\n        this._loopComplete = null;\r\n\t\tthis._onChangeObj = null;\r\n\t\tthis._onChange = null;\r\n        this.clearTarget();\r\n\t\tthis._initialProps = {};\r\n\t\tthis._steps = null;\r\n\t\tthis._curStep = null;\r\n\t\tthis._lastStep = null;\r\n\t\tthis._isStart = false;\r\n        this._tweenId = 0;\r\n\t}\r\n\r\n    private clearTarget(){\r\n        this._target = null\r\n\t    this._targetPos = null\r\n\t    this._targetTransform = null\r\n\t    this._targetScale = null\r\n\t    this._targetRotation = null\r\n\t    this._isTargetSelf = false\r\n\t    this._targetName = \"\"\r\n    }\r\n\t\t\r\n    private clearTargetByKey(k:string){\r\n        if(k == \"x\" || k == \"y\" || k == \"z\"){\r\n            this._targetPos = null;\r\n        }\r\n        else if(k == \"scaleX\" || k == \"scaleY\" || k == \"scaleZ\"){\r\n            this._targetScale = null;\r\n        }\r\n        else if(k == \"rotationX\" || k == \"rotationY\" || k == \"rotationZ\"){\r\n            this._targetRotation = null;\r\n        }\r\n        else if(k == \"width\" || k == \"height\"){\r\n            this._targetTransform = null;\r\n        }\r\n    }\r\n}\r\n\r\nexport default class TweenManager {\r\n    public static TweenPool:GTween[] = [];\r\n    private static getTween():GTween {\r\n        let tw:GTween;\r\n        let time:number = game.totalTime;\r\n        for(let i = 0; i < TweenManager.TweenPool.length; i ++){\r\n            let pool:GTween = TweenManager.TweenPool[i];\r\n            if(time - pool.resetTime > 0.034){\r\n                tw = TweenManager.TweenPool.shift();\r\n                break;\r\n            }\r\n        }\r\n        if(!tw){\r\n            tw = new GTween();\r\n        }\r\n        return tw;\r\n    }\r\n\r\n    // public static TweenList:GTween[] = [];\r\n    private static TweenAttrMap:any = {\r\n        scaleX : \"x\",\r\n        scaleY : \"y\",\r\n        scaleZ : \"z\",\r\n        rotationX : \"x\",\r\n        rotationY : \"y\",\r\n        rotationZ : \"z\",\r\n        width : \"width\",\r\n        height : \"height\",\r\n    }\r\n    private static TweenId:number = 0;\r\n    private static TweenCount:number = 0;\r\n    private static TweenList = {}\r\n    private static TweenTargets = {}\r\n    public static addTween(target:any,props?:any):GTween {\r\n        if(!target) return;\r\n\r\n        let tw:GTween = TweenManager.getTween();\r\n        let tweenId:number = TweenManager.TweenId + 1;\r\n        tw.setTarget(target,tweenId);\r\n        tw.setProps(props);\r\n        TweenManager.TweenId = tweenId;\r\n        // if(!target.gtween_count) {\r\n        //     target.gtween_count = 0;\r\n        // }\r\n        // target.gtween_count++;\r\n        // TweenManager.TweenList.push(tw);\r\n        TweenManager.TweenList[tweenId] = tw;\r\n        TweenManager.TweenTargets[tweenId] = target;\r\n        TweenManager.TweenCount ++;\r\n        // console.log(\"当前缓动数量：\",TweenManager.TweenList.length,\"缓动池数量：\",TweenManager.TweenPool.length);\r\n        return tw;\r\n    }\r\n\r\n    public static removeTweens(target:any):void {\r\n        if(!target){\r\n            return;\r\n        }\r\n        // if(!target.gtween_count || target.gtween_count == 0) return;\r\n        for(let tweenId in TweenManager.TweenTargets){\r\n            let id:number = Number(tweenId);\r\n            let t = TweenManager.TweenTargets[id];\r\n            if(t == target){\r\n                TweenManager.RemoveTweenById(id);\r\n            }\r\n        }\r\n        // let tws:GTween[] = TweenManager.TweenList;\r\n        // for(let i:number = tws.length - 1; i >= 0; i--) {\r\n        //     if(tws[i].getTarget() == target) {\r\n        //         tws[i].reset();\r\n        //         tws.splice(i,1);\r\n        //     }\r\n        // }\r\n        // target.gtween_count = 0;\r\n    }\r\n\r\n    public static RemoveTweenById(tweenId:number){\r\n        if(!tweenId || tweenId == 0){\r\n            return;\r\n        }\r\n        let tw:GTween = TweenManager.TweenList[tweenId];\r\n        if(!tw){\r\n            return;\r\n        }\r\n        tw.reset();\r\n        TweenManager.TweenList[tweenId] = null;\r\n        TweenManager.TweenTargets[tweenId] = null;\r\n        TweenManager.TweenCount --;\r\n        tw.resetTime = game.totalTime;\r\n        TweenManager.TweenPool.push(tw);\r\n    }\r\n\r\n\t// \tpublic.RemoveTween = function(tweenId)\r\n    //     if not tweenId or tweenId == 0 then\r\n    //         return \r\n    //     end\r\n    //     local tw = private.TweenList[tweenId]\r\n    //     if not tw then\r\n    //         return\r\n    //     end\r\n    //     tw:Reset()\r\n    //     private.TweenList[tweenId] = nil\r\n    //     private.TweenTargets[tweenId] = nil\r\n    //     private.tweenCount = private.tweenCount - 1\r\n    //     tw.resetTime = Time.time\r\n    //     table.insert(private.TweenPool,tw)\r\n    // end\r\n\r\n    public static GetTweenAttrName(attrName:string){\r\n        return TweenManager.TweenAttrMap[attrName];\r\n    }\r\n}"]}